# 전자신고 파일 오류검증 프로그램 - 핵심기능 요구사항서

> **프로젝트명**: TaxServiceENTEC-FEV (Tax File Conversion Error Validation)
> **목적**: 더존비즈온, 세무사랑 등 세무회계프로그램에서 생성된 전자신고 파일의 내용오류/형식오류를 검증하는 독립 오류점검 프로그램 개발
> **작성일**: 2026-02-19
> **리서치 범위**: 국내 상용 세무프로그램 분석, 국세청 전자신고 파일 규격, 법적 근거, 세목별 검증항목

---

## 제1장. 리서치 요약

### 1.1 국내 상용 세무회계프로그램 현황

| 프로그램 | 개발사 | 형태 | 전자신고 파일 검증 수준 |
|----------|--------|------|----------------------|
| **Smart A / iCUBE** | 더존비즈온 | On-Premise | 3단계 검증 (입력시→변환전→변환후) |
| **WEHAGO** | 더존비즈온 | 클라우드 SaaS | 서버측 검증 + 홈택스 직접 연동 |
| **세무사랑** | 한길TIS | On-Premise | 전용 오류검증 메뉴 + 일괄검증 강점 |
| **이택스(eTax)** | 이지텍 | On-Premise | 변환시 자동검증 + 파일 미리보기 |
| **키움세무사랑** | 키움닥스 | On-Premise | 2단계 기본 검증 |
| **홈택스** | 국세청 | 웹 | 최종 3단계 검증 (형식→내용→논리/참조) |

### 1.2 현행 프로그램의 오류검증 한계

| 한계점 | 설명 |
|--------|------|
| **프로그램 종속적 검증** | 각 프로그램이 자체 생성 파일만 검증, 타 프로그램 파일 검증 불가 |
| **검증 규칙 비공개** | 검증 로직이 소스코드에 하드코딩되어 세법 개정 대응 느림 |
| **크로스 세목 검증 부재** | 세목 간 교차검증(부가세 매출 ↔ 법인세 수입금액) 미지원 |
| **검증 결과 추적성 부족** | 오류 원인의 법적 근거 미제시, 수정 가이드 미흡 |
| **독립 파일 검증 불가** | 이미 생성된 전자신고 파일을 별도로 검증하는 도구 부재 |

### 1.3 개발 기회 (시장 Gap)

> **핵심 포지셔닝**: 세무프로그램에 종속되지 않는 **독립 오류검증 엔진**으로서,
> 어떤 프로그램에서 생성된 전자신고 파일이든 표준 규격 기반으로 검증할 수 있는 범용 도구

---

## 제2장. 국세청 전자신고 파일 규격

### 2.1 파일 기본 규격

| 항목 | 규격 |
|------|------|
| **파일 형태** | 고정길이(Fixed-Length) 레코드 기반 텍스트 파일 |
| **인코딩** | EUC-KR (기본), UTF-8 (일부 세목 전환 중) |
| **레코드 구분** | 줄바꿈(CRLF 또는 LF)으로 레코드 분리 |
| **필드 구분** | 위치(Position) 기반, 구분자 없음 |
| **필드 정렬** | 문자: 좌측정렬(우측 공백패딩), 숫자: 우측정렬(좌측 '0'패딩) |
| **한글 바이트** | EUC-KR 기준 1문자 = 2바이트 |

### 2.2 파일 확장자 체계

| 확장자 | 세목 |
|--------|------|
| `.101` | 부가가치세 (일반과세자) |
| `.102` | 부가가치세 (간이과세자) |
| `.201` | 법인세 |
| `.301` | 종합소득세 |
| `.401` | 원천세 (원천징수이행상황신고서) |
| `.501` | 양도소득세 |
| `.601` | 증여세 |
| `.701` | 상속세 |

### 2.3 파일 3단 레코드 구조

```
┌──────────────────────────────────────────────┐
│  A 레코드 (헤더/Header) - 1건               │
│  ├── 레코드구분(1) + 서식코드(7)              │
│  ├── 사업자등록번호(10) + 납세자명(40)        │
│  ├── 귀속연도(4) + 귀속기간(2)               │
│  ├── 신고구분코드(2) + 주민등록번호(13)       │
│  └── 프로그램 제조사 식별코드                 │
├──────────────────────────────────────────────┤
│  B~Y 레코드 (바디/Body) - N건               │
│  ├── B: 신고서 본문 (과세표준, 세액 등)       │
│  ├── C: 부속명세서 1                         │
│  ├── D: 부속명세서 2                         │
│  ├── E: 세금계산서 합계표                     │
│  └── F~Y: 기타 부속서류                      │
├──────────────────────────────────────────────┤
│  Z 레코드 (트레일러/Trailer) - 1건           │
│  ├── 총 레코드 건수                          │
│  ├── 합계 금액 (검증용)                      │
│  └── 파일 무결성 검증값                       │
└──────────────────────────────────────────────┘
```

### 2.4 필드 타입별 입력 규칙

| 타입 | 정렬 | 패딩 | 규칙 |
|------|------|------|------|
| **문자(C)** | 좌측정렬 | 우측 공백(0x20) | 한글 EUC-KR 2byte, 영숫자 1byte |
| **숫자(N)** | 우측정렬 | 좌측 '0'(0x30) | 소수점 미사용, 원 단위 정수 |
| **날짜** | - | - | YYYYMMDD 8자리, 하이픈 없음 |
| **사업자번호** | - | - | 10자리 숫자, 하이픈 없음 |
| **주민번호** | - | - | 13자리 숫자, 하이픈 없음 |

---

## 제3장. 법적 근거 및 제도

### 3.1 전자신고 법적 근거

| 법률 | 조항 | 핵심 내용 |
|------|------|----------|
| **국세기본법** | 제5조의2 | 국세정보통신망(홈택스) 이용 전자신고 근거 |
| **국세기본법 시행령** | 제3조의2 | 전자신고 방법, 절차, 프로그램 요건 |
| **부가가치세법** | 제48조, 제49조 | 부가세 확정/예정 신고 의무 |
| **부가가치세법** | 제32조의2 | 전자세금계산서 발급 의무 |
| **소득세법** | 제70조 | 종합소득세 확정신고 의무 |
| **소득세법** | 제105조 | 양도소득세 예정/확정신고 |
| **법인세법** | 제60조 | 법인세 과세표준 신고 의무 |
| **국세청 고시** | 전자신고·납부 고시 | 파일 포맷, 검증 규칙, 오류코드 체계 |

### 3.2 오류 신고 시 가산세 체계

| 가산세 유형 | 세율/금액 | 법적 근거 |
|------------|----------|----------|
| **무신고가산세 (일반)** | 납부세액 x 20% | 국세기본법 제47조의2 |
| **무신고가산세 (부정)** | 납부세액 x 40% | 국세기본법 제47조의2 |
| **과소신고가산세 (일반)** | 과소신고분 x 10% | 국세기본법 제47조의3 |
| **과소신고가산세 (부정)** | 과소신고분 x 40% | 국세기본법 제47조의3 |
| **납부지연가산세** | 미납세액 x 일수 x 0.022% | 국세기본법 제47조의4 |
| **세금계산서 미발급** | 공급가액 x 2% | 부가가치세법 제60조 |
| **세금계산서 부실기재** | 공급가액 x 1% | 부가가치세법 제60조 |
| **전자세금계산서 미전송** | 공급가액 x 0.5% | 부가가치세법 제60조 |
| **합계표 미제출** | 공급가액 x 0.5% | 부가가치세법 제60조 |
| **영세율 과소신고** | 공급가액 x 0.5% | 부가가치세법 제60조 |
| **성실신고확인서 미제출** | 산출세액 x 5% | 소득세법 제81조 |

> **시사점**: 형식오류로 파일이 접수 거부되면 **무신고 가산세** 위험, 내용오류로 세액이 과소 계산되면 **과소신고 가산세 + 납부지연 가산세** 부과. 오류검증 프로그램은 이 위험을 사전에 차단하는 것이 핵심 가치.

### 3.3 수정신고 가산세 감면 규정

| 수정신고 시기 | 감면율 | 비고 |
|-------------|--------|------|
| 법정신고기한 후 1개월 이내 | 90% | 자진 수정 시 |
| 1개월 초과 ~ 3개월 이내 | 75% | |
| 3개월 초과 ~ 6개월 이내 | 50% | |
| 6개월 초과 ~ 1년 이내 | 30% | |
| 1년 초과 ~ 1년 6개월 이내 | 20% | |
| 1년 6개월 초과 ~ 2년 이내 | 10% | |

### 3.4 세무대리인 주의의무

| 책임 유형 | 근거 | 내용 |
|----------|------|------|
| **민사책임** | 민법 제681조, 제390조 | 선관주의의무 위반 시 손해배상 (가산세, 과다납부 등) |
| **행정책임** | 세무사법 제17조 | 고의/중과실 시 징계 (견책, 직무정지, 등록취소) |
| **형사책임** | 조세범처벌법 제3조 | 부정행위 가담 시 2년 이하 징역 또는 포탈세액 2배 벌금 |

---

## 제4장. 핵심기능 요구사항

### 4.1 기능 아키텍처 개요

```
┌─────────────────────────────────────────────────────────────┐
│                    FEV 오류검증 시스템                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────┐   ┌──────────────┐   ┌───────────────────┐  │
│  │ 파일 입력  │──▶│ 파일 파서 엔진 │──▶│ 검증 파이프라인    │  │
│  │ 모듈      │   │              │   │                   │  │
│  │ (.101~.701)│   │ ├ 인코딩감지  │   │ ├ L1: 형식검증    │  │
│  │ EUC-KR    │   │ ├ 레코드분리  │   │ ├ L2: 구조검증    │  │
│  │ UTF-8     │   │ ├ 타입식별    │   │ ├ L3: 내용검증    │  │
│  └──────────┘   │ └ 필드파싱    │   │ ├ L4: 논리검증    │  │
│                  └──────────────┘   │ └ L5: 법규검증    │  │
│                                     └────────┬──────────┘  │
│                                              │              │
│                  ┌──────────────┐   ┌────────▼──────────┐  │
│                  │ 검증규칙     │   │ 결과 리포팅 엔진   │  │
│                  │ 저장소       │──▶│                   │  │
│                  │              │   │ ├ 요약 리포트      │  │
│                  │ ├ DB 기반    │   │ ├ 상세 오류목록    │  │
│                  │ ├ JSON 설정  │   │ ├ 수정가이드      │  │
│                  │ └ 레코드메타  │   │ └ 법적근거 연결   │  │
│                  └──────────────┘   └───────────────────┘  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 [FR-001] 전자신고 파일 파서 엔진

#### 4.2.1 파일 입력 처리

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-001-01 | 다중 세목 파일 지원 | `.101`~`.701` 확장자별 세목 자동 인식 | P1 |
| FR-001-02 | 인코딩 자동 감지 | EUC-KR / UTF-8 자동 감지 및 변환 | P1 |
| FR-001-03 | 합본 파일 처리 | 다수 거래처 합본 파일 분리 파싱 | P1 |
| FR-001-04 | 대용량 파일 처리 | 100MB 이상 파일의 스트림 기반 처리 | P2 |
| FR-001-05 | 다중 파일 동시 처리 | 복수 파일 일괄 업로드 및 순차/병렬 처리 | P2 |

#### 4.2.2 레코드 파싱

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-001-06 | 레코드 타입 식별 | 첫 바이트(A~Z)로 레코드 타입 자동 식별 | P1 |
| FR-001-07 | 고정길이 필드 파싱 | 레코드 레이아웃 메타데이터 기반 위치별 필드 추출 | P1 |
| FR-001-08 | 레코드 레이아웃 외부화 | JSON/DB 기반 레코드별 필드 정의 관리 | P1 |
| FR-001-09 | 세목별 파서 플러그인 | Strategy 패턴으로 세목별 파싱 로직 분리 | P1 |
| FR-001-10 | 바이트 단위 처리 | 한글(EUC-KR 2byte) 포함 정확한 바이트 계산 | P1 |

#### 4.2.3 레코드 레이아웃 메타데이터 구조 (예시)

```json
{
  "taxType": "VAT",
  "formCode": "V101001",
  "version": "2025-01",
  "records": {
    "A": {
      "name": "헤더 레코드",
      "length": 300,
      "fields": [
        {"name": "레코드구분", "start": 1, "length": 1, "type": "C", "required": true},
        {"name": "서식코드", "start": 2, "length": 7, "type": "C", "required": true},
        {"name": "사업자등록번호", "start": 9, "length": 10, "type": "N", "required": true,
         "validation": "BRN_CHECK_DIGIT"},
        {"name": "납세자명", "start": 19, "length": 40, "type": "C", "required": true},
        {"name": "귀속연도", "start": 59, "length": 4, "type": "N", "required": true},
        {"name": "귀속기간", "start": 63, "length": 2, "type": "N", "required": true,
         "validValues": ["01","02","03","04"]}
      ]
    }
  }
}
```

---

### 4.3 [FR-002] 5단계 검증 파이프라인 엔진

#### Level 1: 형식검증 (Format Validation)

| 요구사항 ID | 검증항목 | 설명 | 심각도 |
|------------|---------|------|--------|
| FR-002-01 | 파일 확장자 검증 | 세목별 지정 확장자 여부 | Fatal |
| FR-002-02 | 파일 인코딩 검증 | 지정 문자셋 일치 여부 | Fatal |
| FR-002-03 | 레코드 길이 검증 | 각 레코드의 바이트 수가 규격과 일치 | Fatal |
| FR-002-04 | 필드 데이터 타입 | 숫자 필드에 문자 포함 여부 | Fatal |
| FR-002-05 | 필드 길이 검증 | 필드 값이 지정 바이트 범위 이내 | Fatal |
| FR-002-06 | 코드값 유효성 | 코드 필드가 허용 코드표에 존재 | Fatal |
| FR-002-07 | 날짜 형식 검증 | YYYYMMDD 형식 및 유효 일자 | Fatal |
| FR-002-08 | 패딩 규칙 검증 | 문자 우측공백, 숫자 좌측제로 | Warning |

#### Level 2: 구조검증 (Structural Validation)

| 요구사항 ID | 검증항목 | 설명 | 심각도 |
|------------|---------|------|--------|
| FR-002-09 | A 레코드 존재 | 헤더 레코드 1건 필수 존재 | Fatal |
| FR-002-10 | Z 레코드 존재 | 트레일러 레코드 1건 필수 존재 | Fatal |
| FR-002-11 | 레코드 순서 | A → B~Y → Z 순서 준수 | Fatal |
| FR-002-12 | 레코드 건수 일치 | Z 레코드의 건수 = 실제 데이터 레코드 수 | Fatal |
| FR-002-13 | 필수 레코드 존재 | 세목별 필수 레코드 타입 존재 여부 | Fatal |
| FR-002-14 | 필수 항목 존재 | M(Mandatory) 표시 필드 값 존재 | Fatal |
| FR-002-15 | 조건부 필수 검증 | 특정 조건 시 연관 필드 필수 | Error |

#### Level 3: 내용검증 (Content Validation)

| 요구사항 ID | 검증항목 | 설명 | 심각도 |
|------------|---------|------|--------|
| FR-002-16 | 사업자등록번호 체크디지트 | 10자리 가중치 알고리즘 검증 | Fatal |
| FR-002-17 | 주민등록번호 체크디지트 | 13자리 가중치 알고리즘 검증 | Fatal |
| FR-002-18 | 법인등록번호 체크디지트 | 13자리 가중치 알고리즘 검증 | Fatal |
| FR-002-19 | 합계금액 정합성 | 합계 = Σ(개별항목), 허용오차 0원 | Error |
| FR-002-20 | 세액 계산 검증 | 과세표준 x 세율 = 산출세액 | Error |
| FR-002-21 | 단수처리 규칙 | 과세표준 1,000원 미만 절사, 세액 원 미만 절사 | Warning |
| FR-002-22 | 납부세액 계산 | 산출세액 - 공제세액 - 기납부세액 = 납부세액 | Error |

#### Level 4: 논리검증 (Logic/Cross-reference Validation)

| 요구사항 ID | 검증항목 | 설명 | 심각도 |
|------------|---------|------|--------|
| FR-002-23 | 서식간 금액 일치 | 본문 금액 = 부속명세서 합계 | Error |
| FR-002-24 | 기간 정합성 | 시작일 <= 종료일, 과세기간 범위 | Error |
| FR-002-25 | 상호참조 정합성 | 관련 레코드 간 데이터 일관성 | Error |
| FR-002-26 | 이중신고 검증 | 동일 귀속기간 중복 여부 | Warning |
| FR-002-27 | 전기 대비 연속성 | 이월결손금, 감가상각 누계 등 연속성 | Warning |

#### Level 5: 법규검증 (Tax Law Compliance Validation)

| 요구사항 ID | 검증항목 | 설명 | 심각도 |
|------------|---------|------|--------|
| FR-002-28 | 세율 구간 적용 | 과세표준별 누진세율 정확 적용 | Error |
| FR-002-29 | 공제/감면 한도 | 법정 공제한도 초과 여부 | Error |
| FR-002-30 | 비과세 요건 | 비과세 적용 요건 충족 여부 (1세대1주택 등) | Warning |
| FR-002-31 | 중과세율 적용 | 다주택, 비사업용토지 등 중과 요건 | Warning |
| FR-002-32 | 최저한세 검증 | 감면 후 세액 >= 과세표준 x 최저한세율 | Error |
| FR-002-33 | 가산세 계산 | 법정 가산세 산출의 정확성 | Warning |

---

### 4.4 [FR-003] 세목별 전문 검증 모듈

#### 4.4.1 부가가치세 검증 모듈

##### 4.4.1.1 서식코드 체계

| 서식코드 | 서식명 | 레코드 | 필수 |
|----------|--------|--------|------|
| V101001 | 부가가치세 신고서 (일반과세자) | B | 필수 |
| V101011 | 매출처별 세금계산서합계표(갑) | C | 해당시 |
| V101012 | 매출처별 세금계산서합계표(을) | D | 해당시 |
| V101021 | 매입처별 세금계산서합계표(갑) | E | 해당시 |
| V101022 | 매입처별 세금계산서합계표(을) | F | 해당시 |
| V101031 | 매출처별 계산서합계표(갑) - 면세 | G | 면세겸업시 |
| V101032 | 매출처별 계산서합계표(을) - 면세 | H | 면세겸업시 |
| V101041 | 매입처별 계산서합계표(갑) - 면세 | I | 면세겸업시 |
| V101042 | 매입처별 계산서합계표(을) - 면세 | J | 면세겸업시 |
| V101051 | 신용카드매출전표등수령명세서(갑) | K | 해당시 |
| V101052 | 신용카드매출전표등수령명세서(을) | L | 해당시 |
| V101061 | 의제매입세액공제신고서 | M | 해당시 |
| V101071 | 건물등감가상각자산취득명세서 | N | 해당시 |
| V101081 | 대손세액공제(변제)신고서 | O | 해당시 |
| V101091 | 영세율첨부서류제출명세서 | P | 영세율시 |
| V101101 | 수출실적명세서 | Q | 수출시 |
| V101111 | 공통매입세액안분계산명세서 | R | 겸업시 |
| V101121 | 부동산임대공급가액명세서 | S | 부동산임대시 |
| V101131 | 현금매출명세서 | T | 해당시 |
| V101141 | 총괄납부 사업장별 명세서 | U | 총괄납부시 |
| V102001 | 간이과세자 부가가치세 신고서 | B | .102 파일 |

##### 4.4.1.2 B 레코드 (신고서 본문) 주요 필드

| 필드명 | 길이 | 타입 | 필수 | 검증규칙 |
|--------|------|------|------|---------|
| 세금계산서발급분-과세표준 | 15 | N | M | |
| 세금계산서발급분-세액 | 13 | N | M | = 과세표준 x 10% |
| 신용카드현금영수증발행분-과세표준 | 15 | N | O | |
| 신용카드현금영수증발행분-세액 | 13 | N | O | = 과세표준 x 10% |
| 영세율세금계산서발급분-과세표준 | 15 | N | O | 세액 = 0 |
| 과세표준합계 | 15 | N | M | = SUM(각 유형별 과세표준) |
| 매출세액합계 | 13 | N | M | = SUM(각 유형별 세액) |
| 세금계산서수취분일반매입-세액 | 13 | N | O | |
| 세금계산서수취분고정자산매입-세액 | 13 | N | O | |
| 공제받을매입세액합계 | 13 | N | M | = SUM(각 매입세액) |
| 공제받지못할매입세액합계 | 13 | N | O | 불공제 매입세액 |
| 납부(환급)세액 | 13 | N | M | = 매출세액 - 매입세액 + 불공제 |
| 차가감납부할세액 | 13 | N | M | = 납부세액 - 공제 - 기납부 |

##### 4.4.1.3 매출세액 계산 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 근거법령 |
|---------|---------|---------|---------|
| VAT-C001 | 과세 매출세액 | 매출세액 = 과세표준 x 10% | 부가가치세법 제30조 |
| VAT-C002 | 영세율 매출세액 | 영세율 매출 세액 = 0원 | 부가가치세법 제11조 |
| VAT-C003 | 과세표준 합계 | 합계 = SUM(세금계산서+신용카드+기타+영세율) | |
| VAT-C004 | 매출세액 합계 | 합계 = SUM(각 유형별 세액) | |
| VAT-C005 | 과세표준 단수처리 | 1,000원 미만 절사 | 국세기본법 제50조 |

##### 4.4.1.4 매입세액 공제 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 근거법령 |
|---------|---------|---------|---------|
| VAT-C010 | 매입세액 합계 | 공제받을매입세액 = SUM(일반+고정자산+예정누락+기타공제) | 부가가치세법 제37조 |
| VAT-C011 | 불공제 매입세액 | 접대비, 비영업용 승용차 매입세액 불공제 | 부가가치세법 제39조 |
| VAT-C012 | 개별 세금계산서 | 개별 세액 = 공급가액 x 10% | |
| VAT-C013 | 토지 관련 매입세액 | 토지 취득·자본적 지출 매입세액 불공제 | 부가가치세법 제39조①④ |

##### 4.4.1.5 세금계산서합계표 교차 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 |
|---------|---------|---------|
| VAT-L001 | 매출합계표↔신고서 | C레코드 총공급가액 = B레코드 세금계산서발급분 과세표준 |
| VAT-L002 | 매출합계표↔신고서 세액 | C레코드 총세액 = B레코드 세금계산서발급분 세액 |
| VAT-L003 | 매입합계표↔신고서 | E레코드 총공급가액 = B레코드 세금계산서수취분 과세표준 |
| VAT-L004 | 매입합계표↔신고서 세액 | E레코드 총세액 = B레코드 세금계산서수취분 세액 |
| VAT-L005 | 갑지↔을지 매수 | 갑지 총매수 = SUM(을지 각 거래처 매수) |
| VAT-L006 | 갑지↔을지 공급가액 | 갑지 총공급가액 = SUM(을지 각 거래처 공급가액) |
| VAT-L007 | 갑지↔을지 세액 | 갑지 총세액 = SUM(을지 각 거래처 세액) |
| VAT-L008 | 전자+종이=총합계 | 전자세금계산서 + 종이세금계산서 = 총합계 |

##### 4.4.1.6 공통매입세액 안분계산 검증

| 검증 ID | 검증항목 | 검증규칙 | 근거법령 |
|---------|---------|---------|---------|
| VAT-C030 | 안분비율 계산 | 면세비율 = 면세공급가액 / (과세+면세) | 부가가치세법 제40조 |
| VAT-C031 | 불공제세액 | 불공제세액 = 공통매입세액 x 면세비율 | |
| VAT-C032 | 5% 미만 면세비율 | 면세비율 5% 미만 시 전액 공제 가능 | 시행령 제81조 |

##### 4.4.1.7 의제매입세액 공제율 (업종별)

| 업종 | 공제율 | 적용대상 |
|------|--------|---------|
| 음식점업 (개인, 과세매출 2억 이하) | 9/109 | 면세 농산물 등 원재료 |
| 음식점업 (개인, 과세매출 2억 초과) | 8/108 | |
| 음식점업 (법인) | 6/106 | |
| 제조업 (중소기업, 개인) | 4/104 | |
| 제조업 (중소기업, 법인) | 3/103 | |
| 과세유흥장소 | 2/102 | |
| 기타 | 2/102 | |

##### 4.4.1.8 간이과세자 업종별 부가가치율

| 업종 | 부가가치율 |
|------|----------|
| 전기, 가스, 증기 및 수도사업 | 5% |
| 소매업, 재생용 재료수집판매업 | 15% |
| 제조업, 농업, 임업, 어업 | 20% |
| 숙박업 | 25% |
| 건설업, 운수 및 통신업 | 30% |
| 음식점업 | 15% |
| 부동산임대업 | 40% |
| 그 밖의 서비스업 | 30% |

> **간이과세자 세액**: 납부세액 = 공급대가 x 업종별 부가가치율 x 10%

##### 4.4.1.9 납부세액 계산 검증

| 검증 ID | 검증항목 | 검증규칙 |
|---------|---------|---------|
| VAT-C050 | 납부(환급)세액 | = 매출세액 - 공제받을매입세액 + 불공제매입세액 |
| VAT-C051 | 차가감납부세액 | = 납부세액 - 경감공제 - 예정미환급 - 예정고지 - 기납부 |
| VAT-C052 | 신용카드발행공제 | 연간 1,000만원 한도 (일반 1.3%, 음식숙박 2.6%) |
| VAT-C053 | 전자세금계산서발급공제 | 건당 200원, 연 100만원 한도 (개인사업자) |

##### 4.4.1.10 부가가치세 오류코드 목록

| 코드 | 레벨 | 심각도 | 오류메시지 |
|------|------|--------|----------|
| VAT-F001 | L1 | Fatal | 파일 확장자가 .101/.102이 아닙니다 |
| VAT-F002 | L1 | Fatal | 레코드 길이 오류 (기대:{expected}, 실제:{actual}) |
| VAT-F003 | L1 | Fatal | 숫자 필드에 문자 포함 |
| VAT-S001 | L2 | Fatal | A/B/Z 레코드 누락 |
| VAT-S002 | L2 | Fatal | 레코드 순서 오류 |
| VAT-S003 | L2 | Fatal | Z레코드 건수 불일치 |
| VAT-S004 | L2 | Fatal | A/B 레코드 사업자번호 불일치 |
| VAT-S005 | L2 | Error | 합계표 갑/을지 쌍 불일치 |
| VAT-C001 | L3 | Error | 매출세액 불일치 (파일:{actual}, 계산:{expected}) |
| VAT-C002 | L3 | Error | 과세표준 합계 불일치 |
| VAT-C003 | L3 | Error | 납부세액 계산 오류 |
| VAT-L001 | L4 | Error | 매출합계표와 신고서 금액 불일치 |
| VAT-L002 | L4 | Error | 매입합계표와 신고서 금액 불일치 |
| VAT-L003 | L4 | Error | 갑지/을지 합계 불일치 |
| VAT-L004 | L4 | Error | 의제매입세액 신고서↔본문 불일치 |
| VAT-R001 | L5 | Error | 과세 매출에 영세율 적용 |
| VAT-R002 | L5 | Error | 간이과세 부가가치율 오적용 |
| VAT-R003 | L5 | Warning | 신용카드발행공제 한도 초과 |
| VAT-R004 | L5 | Error | 대손세액공제 기간(5년) 초과 |

---

#### 4.4.2 법인세 검증 모듈

##### 4.4.2.1 법인세 파일 분리 구조

| 구분 | 법인세-1 | 법인세-2 |
|------|---------|---------|
| **내용** | 기본 신고서 + 세무조정 서식 | 재무제표 + 부속명세서 |
| **서식코드** | CIT0100~CIT0199 | CIT0200~CIT0299 |
| **접수순서** | 먼저 접수 (필수) | 법인세-1 접수 후 접수 |
| **필수여부** | 필수 | 필수 |

##### 4.4.2.2 법인세-1 서식코드 체계

| 서식코드 | 레코드 | 서식명 | 비고 |
|---------|--------|--------|------|
| CIT0100 | A | 헤더 레코드 | 납세자/신고 기본정보 |
| CIT0101 | B | 과세표준 및 세액신고서 | 핵심 신고서 |
| CIT0102 | C | 세무조정계산서 | 당기순이익→소득금액 |
| CIT0103 | D | 소득금액조정합계표 | 익금산입/손금불산입 합계 |
| CIT0110 | F | 자본금과 적립금 조정명세서(갑) | 기초/당기증감/기말 |
| CIT0111 | G | 자본금과 적립금 조정명세서(을) | 세부 명세 |
| CIT0120 | H | 기부금 명세서 | 법정/지정 기부금 |
| CIT0130 | J | 접대비 조정명세서(갑) | 한도초과액 |
| CIT0140 | L | 감가상각비 조정명세서(갑) | 상각범위/부인액 |
| CIT0150 | O | 대손충당금 조정명세서 | 설정한도 |
| CIT0190 | S | 세액공제 조정명세서 | 공제감면 세액 |
| CIT0191 | T | 최저한세 조정명세서 | 최저한세 계산 |
| CIT0199 | Z | 트레일러 | 건수/검증합계 |

##### 4.4.2.3 법인세-2 서식코드 체계

| 서식코드 | 레코드 | 서식명 |
|---------|--------|--------|
| CIT0200 | A | 헤더 레코드 |
| CIT0201 | B | 재무상태표 (대차대조표) |
| CIT0202 | C | 손익계산서 |
| CIT0203 | D | 이익잉여금처분계산서 |
| CIT0204 | E | 현금흐름표 |
| CIT0205 | F | 자본변동표 |
| CIT0210 | G | 원가명세서 |
| CIT0240 | J | 주식등변동상황명세서 |
| CIT0260 | L | 특수관계자간거래명세서 |
| CIT0299 | Z | 트레일러 레코드 |

##### 4.4.2.4 법인세율 (2024~2025 사업연도)

| 과세표준 구간 | 세율 | 누진공제 | 산출세액 산식 |
|-------------|------|---------|-------------|
| 2억원 이하 | 9% | - | 과세표준 x 9% |
| 2억~200억 | 19% | 2,000만원 | 과세표준 x 19% - 2,000만원 |
| 200억~3,000억 | 21% | 4.2억원 | 과세표준 x 21% - 4.2억원 |
| 3,000억 초과 | 24% | 94.2억원 | 과세표준 x 24% - 94.2억원 |

##### 4.4.2.5 최저한세율

| 구분 | 최저한세율 |
|------|----------|
| 중소기업 | 7% |
| 과세표준 100억 이하 (일반) | 10% |
| 100억~1,000억 | 12% |
| 1,000억 초과 | 17% |

##### 4.4.2.6 법인세 핵심 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 근거법령 |
|---------|---------|---------|---------|
| CIT-C001 | 당기순이익 일치 | 법인세-2 손익계산서 당기순이익 = 법인세-1 세무조정계산서 결산서상 당기순이익 | 법인세법 시행규칙 별지 제3호 |
| CIT-C002 | 소득금액 계산 | 소득금액 = 당기순이익 + 익금산입 + 손금불산입 - 손금산입 - 익금불산입 | 법인세법 제14조 |
| CIT-C003 | 과세표준 계산 | 과세표준 = 소득금액 - 이월결손금 - 비과세소득 | 법인세법 제13조 |
| CIT-C004 | 산출세액 계산 | 산출세액 = 과세표준 x 세율 (구간별 누진) | 법인세법 제55조 |
| CIT-C005 | 총결정세액 | 총결정세액 = 산출세액 - 공제감면 + 가산세 | |
| CIT-C006 | 차감납부세액 | 차감납부세액 = 총결정세액 - 기납부세액 | |
| CIT-C007 | 이월결손금 한도 | 일반: 소득 x 60%, 중소기업: 100% | 법인세법 제13조 |
| CIT-C008 | 이월결손금 기간 | 15년(2020이후), 10년(2009~2019), 5년(2008이전) | |
| CIT-C009 | 최저한세 검증 | 감면후세액 >= 과세표준 x 최저한세율 | 조특법 제132조 |
| CIT-C010 | 지방소득세 | 법인세 x 10% | 지방세법 제103조의20 |

##### 4.4.2.7 세무조정 부속서류 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 근거법령 |
|---------|---------|---------|---------|
| CIT-L001 | 접대비 한도 | 기본한도(1,200만/중소3,600만) + 수입금액기준한도 | 법인세법 제25조 |
| CIT-L002 | 기부금 한도 | 법정:(소득-결손금)x50%, 지정:(소득-결손금-법정)x10% | 법인세법 제24조 |
| CIT-L003 | 감가상각비 | 상각부인액 = MAX(0, 회사계상액 - 상각범위액) | 법인세법 제23조 |
| CIT-L004 | 대손충당금 | 한도 = 채권잔액 x MAX(대손실적률, 1%) | 법인세법 제34조 |
| CIT-L005 | 자본금적립금 | 기말잔액 = 기초 + 증가 - 감소 | |
| CIT-L006 | 소득처분 반영 | 소득금액조정합계표 ← 각 부속명세서 조정액 | |

##### 4.4.2.8 법인세-2 재무제표 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 심각도 |
|---------|---------|---------|--------|
| CIT2-E001 | 재무상태표 대차균형 | 자산총계 = 부채총계 + 자본총계 | Fatal |
| CIT2-E002 | 유동자산 합계 | 유동자산합계 = SUM(세부계정) | Error |
| CIT2-E003 | 비유동자산 합계 | 비유동자산합계 = SUM(세부계정) | Error |
| CIT2-E010 | 매출총이익 | = 매출액 - 매출원가 | Error |
| CIT2-E011 | 영업이익 | = 매출총이익 - 판매비와관리비 | Error |
| CIT2-E012 | 법인세비용차감전순이익 | = 영업이익 + 영업외수익 - 영업외비용 | Error |
| CIT2-E013 | 당기순이익 | = 법인세비용차감전순이익 - 법인세비용 | Fatal |
| CIT2-E020 | 당기순이익 교차 | 법인세-2 당기순이익 = 법인세-1 결산서상 당기순이익 | Fatal |
| CIT2-E021 | 감가상각비 연결 | 법인세-1 회사계상액 = 손익계산서 감가상각비 | Error |
| CIT2-E023 | 이익잉여금 연결 | 재무상태표 = 이익잉여금처분계산서 | Error |
| CIT2-E030 | 현금흐름표 | 기초+영업+투자+재무 = 기말현금 | Warning |
| CIT2-E040 | 전기연속성 | 당기 전기금액 = 전기 신고서 당기금액 | Warning |

##### 4.4.2.9 접대비 수입금액별 적용률

| 수입금액 구간 | 일반법인 | 중소기업 |
|-------------|---------|---------|
| 100억 이하 | 0.30% | 0.35% |
| 100억~500억 | 0.20% | 0.20% |
| 500억 초과 | 0.03% | 0.03% |

---

#### 4.4.3 종합소득세 검증 모듈

##### 4.4.3.1 종합소득세 레코드 체계

| 레코드 | 서식명 | 필수 |
|--------|--------|------|
| A | 헤더 레코드 | 필수 |
| B | 종합소득세 과세표준확정신고서 | 필수 |
| C | 소득금액계산명세서 (사업소득) | 조건부 |
| D | 소득금액계산명세서 (부동산임대) | 조건부 |
| E | 소득금액계산명세서 (기타소득) | 조건부 |
| F | 인적공제명세서 | 필수 |
| G | 소득공제명세서 (연금/저축 등) | 조건부 |
| H | 특별소득공제명세서 | 조건부 |
| I | 세액공제명세서 | 조건부 |
| J | 기납부세액명세서 | 조건부 |
| K | 추계소득금액계산서 (경비율 적용) | 조건부 |
| L | 성실신고확인서 | 조건부 |
| Z | 트레일러 레코드 | 필수 |

##### 4.4.3.2 B 레코드 (과세표준확정신고서) 주요 필드

| 영역 | 필드명 | 길이 | 타입 | 필수 |
|------|--------|------|------|------|
| 소득금액 | 이자소득금액 | 15 | N | O |
| 소득금액 | 배당소득금액 | 15 | N | O |
| 소득금액 | 사업소득금액 | 15 | N | O |
| 소득금액 | 근로소득금액 | 15 | N | O |
| 소득금액 | 연금소득금액 | 15 | N | O |
| 소득금액 | 기타소득금액 | 15 | N | O |
| 소득금액 | **종합소득금액** | 15 | N | M |
| 소득공제 | 인적공제합계 | 15 | N | M |
| 소득공제 | 국민연금보험료공제 | 15 | N | O |
| 소득공제 | 신용카드소득공제 | 15 | N | O |
| 소득공제 | **소득공제합계** | 15 | N | M |
| 세액 | **종합소득과세표준** | 15 | N | M |
| 세액 | **산출세액** | 15 | N | M |
| 세액공제 | 세액공제합계 | 15 | N | M |
| 세액 | **결정세액** | 15 | N | M |
| 세액 | 가산세합계 | 15 | N | O |
| 세액 | **총결정세액** | 15 | N | M |
| 기납부 | 기납부세액합계 | 15 | N | M |
| 기납부 | 중간예납세액 | 15 | N | O |
| 기납부 | 원천징수세액 | 15 | N | O |
| 최종 | **납부할세액(환급세액)** | 15 | N | M |
| 최종 | 지방소득세 | 15 | N | M |

##### 4.4.3.3 종합소득세 8단계 누진세율 (2025년 귀속)

| 과세표준 구간 | 세율 | 누진공제 | 산출세액 산식 |
|-------------|------|---------|-------------|
| 1,400만원 이하 | 6% | 0 | 과세표준 x 6% |
| 1,400만~5,000만원 | 15% | 126만원 | 과세표준 x 15% - 126만원 |
| 5,000만~8,800만원 | 24% | 576만원 | 과세표준 x 24% - 576만원 |
| 8,800만~1.5억원 | 35% | 1,544만원 | 과세표준 x 35% - 1,544만원 |
| 1.5억~3억원 | 38% | 1,994만원 | 과세표준 x 38% - 1,994만원 |
| 3억~5억원 | 40% | 2,594만원 | 과세표준 x 40% - 2,594만원 |
| 5억~10억원 | 42% | 3,594만원 | 과세표준 x 42% - 3,594만원 |
| 10억원 초과 | 45% | 6,594만원 | 과세표준 x 45% - 6,594만원 |

##### 4.4.3.4 인적공제 요건

| 공제유형 | 요건 | 금액 |
|---------|------|------|
| 기본공제 - 본인 | 항상 적용 | 150만원 |
| 기본공제 - 배우자 | 연간소득 100만원 이하 (근로소득만: 총급여 500만원 이하) | 150만원 |
| 기본공제 - 직계존속 | 만60세 이상 + 소득 100만원 이하 | 150만원 |
| 기본공제 - 직계비속 | 만20세 이하 + 소득 100만원 이하 | 150만원 |
| 추가공제 - 경로우대 | 만70세 이상 기본공제 대상자 | 100만원 |
| 추가공제 - 장애인 | 기본공제 대상자 중 장애인 (연령무관) | 200만원 |
| 추가공제 - 부녀자 | 종합소득 3,000만원 이하 여성 | 50만원 |
| 추가공제 - 한부모 | 배우자 없이 직계비속 있는 경우 | 100만원 |

> **주의**: 부녀자공제와 한부모공제 중복 적용 불가 (한부모 우선)

##### 4.4.3.5 신용카드 소득공제 상세

| 결제수단 | 공제율 | 비고 |
|---------|--------|------|
| 신용카드 | 15% | |
| 직불/선불카드 | 30% | |
| 현금영수증 | 30% | |
| 도서/공연/미술관 | 30% | 총급여 7,000만원 이하 |
| 전통시장 | 40% | |
| 대중교통 | 40% | |

| 총급여 구간 | 공제한도 |
|------------|---------|
| 7,000만원 이하 | 300만원 |
| 7,000만~1.2억원 | 250만원 |
| 1.2억원 초과 | 200만원 |

> **공제대상금액** = 총사용금액 - (총급여 x 25%)

##### 4.4.3.6 세액공제 상세

| 세액공제 항목 | 공제율/금액 | 한도 |
|-------------|-----------|------|
| 자녀세액공제 | 1인:15만, 2인:30만, 3인~:+30만/인 | - |
| 출산/입양세액공제 | 첫째30만, 둘째50만, 셋째70만 | - |
| 연금계좌세액공제 | 12%(총급여5,500만이하 15%) | 900만원 |
| 보험료세액공제 | 12% | 연 100만원 |
| 의료비세액공제 | 15%(난임 20%, 미숙아 30%) | 총급여3%초과분, 700만원 |
| 교육비세액공제 | 15% | 본인:무한도, 대학900만원 |
| 기부금세액공제 | 15%(1,000만원초과 30%) | 법정:소득100%, 지정:30% |
| 표준세액공제 | 13만원(근로자)/7만원(기타) | - |
| 월세세액공제 | 17%(총급여5,500만이하)/15% | 연 1,000만원 |

##### 4.4.3.7 소득공제 종합한도

| 항목 | 기준 |
|------|------|
| 종합한도 금액 | **2,500만원** |
| 적용 대상 | 소기업소상공인공제, 주택마련저축, 신용카드공제, 투자조합출자공제 등 |
| 미적용 대상 | 국민연금, 건강보험, 주택자금공제(일부), 기본공제 |

##### 4.4.3.8 사업소득 경비율 적용

| 신고방법 | 적용대상 | 경비 산정방식 |
|---------|---------|-------------|
| 복식부기 | 수입금액 기준 복식부기의무자 | 실제 장부 기장 |
| 간편장부 | 복식부기의무자 외 사업자 | 간편장부 실제 경비 |
| 추계(기준경비율) | 무기장 + 일정 수입금액 초과자 | 주요경비(실제) + 수입금액x기준경비율 |
| 추계(단순경비율) | 무기장 + 소규모 사업자 | 수입금액 x 단순경비율 |

**복식부기의무자 수입금액 기준**:

| 업종 | 수입금액 기준 |
|------|-------------|
| 농업, 도소매업, 부동산매매업 | 3억원 이상 |
| 제조업, 숙박음식업, 건설업, 운수업 | 1.5억원 이상 |
| 부동산임대업, 서비스업, 전문직 | 7,500만원 이상 |

##### 4.4.3.9 종합소득세 핵심 검증 규칙

| 검증 ID | 검증항목 | 검증규칙 | 심각도 |
|---------|---------|---------|--------|
| INC-C001 | 소득합산 | 종합소득금액 = 이자+배당+사업+근로+연금+기타 | Error |
| INC-C002 | 과세표준 | 과세표준 = 종합소득금액 - 소득공제합계 (1,000원 미만 절사) | Error |
| INC-C003 | 산출세액 | 산출세액 = 과세표준 x 세율 - 누진공제 | Error |
| INC-C004 | 결정세액 | 결정세액 = 산출세액 - 세액공제합계 | Error |
| INC-C005 | 납부세액 | 납부세액 = 총결정세액 - 기납부세액 | Error |
| INC-C006 | 지방소득세 | 납부세액 x 10% | Error |
| INC-L001 | 인적공제 소득요건 | 부양가족 소득금액 <= 100만원 | Error |
| INC-L002 | 인적공제 연령요건 | 직계존속 60세이상, 직계비속 20세이하 | Error |
| INC-L003 | 부녀자/한부모 중복 | 동시 적용 불가 (한부모 우선) | Error |
| INC-L004 | 신용카드 공제한도 | 총급여 구간별 한도 초과 여부 | Error |
| INC-L005 | 소득공제 종합한도 | 2,500만원 초과 여부 | Error |
| INC-L006 | 사업소득 교차 | B레코드 사업소득 = C레코드 합계 | Error |
| INC-L007 | 경비율 적용 | 업종코드별 고시 경비율 일치 | Error |
| INC-L008 | 금융소득 종합과세 | 이자+배당 > 2,000만원 시 종합과세 | Warning |
| INC-L009 | 기장의무 확인 | 수입금액 기준상 복식부기의무자 확인 | Warning |
| INC-L010 | 성실신고확인 | 수입금액 5억 이상: 확인서 필수 | Warning |
| INC-T001 | 세율구간 오류 | 과세표준 대비 적용세율 일치 확인 | Error |
| INC-T002 | 의료비 공제한도 | 700만원 한도 초과 여부 | Error |
| INC-T003 | 교육비 공제한도 | 법정한도 초과 여부 | Error |
| INC-T004 | 표준/특별세액공제 중복 | 동시 적용 불가 | Error |
| INC-T005 | 월세공제 소득요건 | 총급여 8,000만원 초과 시 불가 | Error |

##### 4.4.3.10 근로소득공제율

| 총급여액 구간 | 공제율 |
|-------------|--------|
| 500만원 이하 | 70% |
| 500만~1,500만원 | 350만 + 초과분 x 40% |
| 1,500만~4,500만원 | 750만 + 초과분 x 15% |
| 4,500만~1억원 | 1,200만 + 초과분 x 5% |
| 1억원 초과 | 1,475만 + 초과분 x 2% (한도 2,000만원) |

---

#### 4.4.4 원천세 검증 모듈

##### 4.4.4.1 원천세 서식 체계

| 서식코드 | 레코드 | 서식명 |
|---------|--------|--------|
| A304100 | A, B | 원천징수이행상황신고서 |
| A304200 | C | 근로소득 지급명세서 |
| A304300 | D | 사업소득 지급명세서 |
| A304400 | E | 기타소득 지급명세서 |
| A304500 | F | 퇴직소득 지급명세서 |
| A304600 | G | 일용근로소득 지급명세서 |
| A304700 | H | 이자/배당소득 지급명세서 |
| A304800 | I | 연금소득 지급명세서 |
| A304900 | J | 비거주자 소득 지급명세서 |
| A305000 | K | 종교인소득 지급명세서 |

##### 4.4.4.2 B 레코드 소득종류코드 체계 (A01~A99)

| 코드 | 소득종류 | 원천징수세율 |
|------|---------|------------|
| A01 | 근로소득(간이세액) | 간이세액표 |
| A02 | 근로소득(중도퇴사) | 연말정산 |
| A03 | 일용근로소득 | 2.7% |
| A04 | 근로소득(연말정산) | 연말정산 |
| A09 | 근로소득 소계 | |
| A10 | 퇴직소득 | 환산급여 기반 |
| A20 | 사업소득(일반) | 3% |
| A21 | 사업소득(연금계좌) | 3% |
| A22 | 봉사료 | 5% |
| A25 | 종교인소득(기타소득) | 기타소득세율 |
| A26 | 종교인소득(근로소득) | 간이세액표 |
| A29 | 사업소득 소계 | |
| A30 | 기타소득 | 20% |
| A40 | 이자소득 | 14%/25% |
| A41 | 배당소득 | 14% |
| A42 | 집합투자 | 14% |
| A49 | 금융소득 소계 | |
| A50 | 연금소득 | 3~5% |
| A60 | 저축해지추징 | 감면세율 |
| A69 | 기타소득 소계 | |
| A70~A79 | 비거주자 소득 | 20%/조약세율 |
| A80 | 비거주자 소계 | |
| A90 | 가감계 | |
| A99 | 합계 | |

> 각 소득종류코드별 4개 필드 반복: **인원(N,8) + 총지급액(N,14) + 소득세(N,14) + 지방소득세(N,14)**

##### 4.4.4.3 소득유형별 원천징수세율 상세

**일용근로소득**:
```
소득세 = (일급여 - 150,000원) x 6% x (1 - 55%)
       = (일급여 - 150,000원) x 2.7%
지방소득세 = 소득세 x 10%
```

**사업소득**: 지급액 x 3% (봉사료: 5%)

**기타소득**: (지급액 - 필요경비) x 20% (필요경비율: 일반 60%)

**이자/배당소득**: 일반 14%, 비영업대금이자 25%, 비실명 38%

**퇴직소득세**:
```
1. 퇴직소득공제 (근속연수공제)
   - 5년이하: 100만원 x 근속연수
   - 5~10년: 500만 + 200만 x (근속연수-5)
   - 10~20년: 1,500만 + 250만 x (근속연수-10)
   - 20년초과: 4,000만 + 300만 x (근속연수-20)
2. 환산급여 = (퇴직소득금액 - 퇴직소득공제) x 12 / 근속연수
3. 환산급여공제 적용
4. 환산산출세액 = 기본세율(6%~45%) 적용
5. 퇴직소득산출세액 = 환산산출세액 x 근속연수 / 12
```

##### 4.4.4.4 원천세 합계 정합성 검증

| 검증 ID | 검증항목 | 검증규칙 | 심각도 |
|---------|---------|---------|--------|
| WHT-C001 | 근로소득 소계 | A09 = A01 + A02 + A03 + A04 (인원/지급액/소득세/지방세 각각) | Error |
| WHT-C002 | 사업소득 소계 | A29 = A20 + A21 + A22 + A25 + A26 | Error |
| WHT-C003 | 금융소득 소계 | A49 = A40 + A41 + A42 | Error |
| WHT-C004 | 기타 소계 | A69 = A30 + A50 + A60 | Error |
| WHT-C005 | 비거주자 소계 | A80 = A70~A79 합계 | Error |
| WHT-C006 | 가감계 | A90 = A09 + A10 + A29 + A49 + A69 + A80 | Error |
| WHT-C007 | 최종합계 | A99 = A90 (일반 경우) | Error |
| WHT-C008 | 지방소득세 | 각 항목 지방소득세 = 소득세 x 10% | Error |
| WHT-C009 | 납부세액 | A99 소득세 - 조정환급 - 전월미환급이월 | Error |

##### 4.4.4.5 신고서↔지급명세서 교차검증

| 검증 ID | 검증항목 | 검증규칙 | 심각도 |
|---------|---------|---------|--------|
| WHT-L001 | 근로소득 인원 | B레코드 A01 인원 = C레코드(간이세액) 건수 | Error |
| WHT-L002 | 일용근로 인원 | B레코드 A03 인원 = G레코드 건수 | Error |
| WHT-L003 | 사업소득 인원 | B레코드 A20 인원 = D레코드 건수 | Error |
| WHT-L004 | 기타소득 인원 | B레코드 A30 인원 = E레코드 건수 | Error |
| WHT-L005 | 퇴직소득 인원 | B레코드 A10 인원 = F레코드 건수 | Error |
| WHT-L006 | 총지급액 일치 | B레코드 총지급액 = 지급명세서 합계 | Error |

##### 4.4.4.6 연말정산 검증 (C 레코드)

| 검증 ID | 검증항목 | 검증규칙 |
|---------|---------|---------|
| WHT-Y001 | 근로소득공제 | 총급여 구간별 공제율 적용 정합성 |
| WHT-Y002 | 소득공제 한도 | 각 항목별 법정한도 이내 |
| WHT-Y003 | 세액공제 한도 | 각 항목별 법정한도 이내 |
| WHT-Y004 | 결정세액 | = 산출세액 - 세액공제합계 |
| WHT-Y005 | 차감징수세액 | = 결정세액 - 기납부세액 (음수: 환급) |
| WHT-Y006 | 비과세소득 합계 | = 개별 비과세항목 합산 |

##### 4.4.4.7 월별/반기별 신고 구분

| 구분 | 월별 신고 | 반기별 신고 |
|------|---------|-----------|
| 대상 | 일반 사업자 | 상시고용인원 20인 이하 (승인 필요) |
| 신고기한 | 다음달 10일 | 상반기:7/10, 하반기:1/10 |
| A레코드 반기구분 | N | Y |

##### 4.4.4.8 비거주자 원천징수세율

| 소득 유형 | 국내세법 세율 | 비고 |
|----------|-------------|------|
| 이자소득 | 20%(또는 14%) | 조약세율 적용 가능 |
| 배당소득 | 20% | 조약세율 적용 가능 |
| 사업소득 | 20%(또는 2%) | 고정사업장 유무 |
| 인적용역 | 20% | |
| 근로소득 | 간이세액 | 183일 규칙 |
| 사용료 | 20% | 조약세율 적용 가능 |

##### 4.4.4.9 원천세 오류코드 목록

| 코드 | 레벨 | 심각도 | 오류메시지 |
|------|------|--------|----------|
| WHT-F001 | L1 | Fatal | 파일 확장자가 .401이 아닙니다 |
| WHT-F002 | L1 | Fatal | 레코드 길이 규격 불일치 |
| WHT-F003 | L1 | Fatal | 숫자 필드에 문자 포함 |
| WHT-S001 | L2 | Fatal | Z레코드 건수 불일치 |
| WHT-S002 | L2 | Fatal | 필수 레코드 누락 |
| WHT-S003 | L2 | Fatal | 사업자번호 레코드간 불일치 |
| WHT-C001 | L3 | Error | 소득종류별 소계 불일치 |
| WHT-C002 | L3 | Error | 가감계(A90) 합산 오류 |
| WHT-C003 | L3 | Error | 합계(A99) 오류 |
| WHT-C004 | L3 | Error | 지방소득세 = 소득세x10% 불일치 |
| WHT-C005 | L3 | Error | 납부세액 계산 오류 |
| WHT-L001 | L4 | Error | 신고서 인원 vs 지급명세서 건수 불일치 |
| WHT-L002 | L4 | Error | 신고서 총지급액 vs 지급명세서 합계 불일치 |
| WHT-L003 | L4 | Error | 연말정산 결정세액 계산 오류 |
| WHT-L004 | L4 | Error | 퇴직소득세 환산계산 오류 |
| WHT-W001 | L5 | Warning | 일용근로 일급여 15만원 이하 세액=0 확인 |
| WHT-W002 | L5 | Warning | 사업소득 3% 미적용 건 존재 |
| WHT-W003 | L5 | Warning | 기타소득 필요경비율 비정상 |

---

#### 4.4.5 양도소득세 검증 모듈

| 요구사항 ID | 검증항목 | 검증규칙 |
|------------|---------|---------|
| FR-003-33 | 양도차익 계산 | 양도가액 - 취득가액 - 필요경비 = 양도차익 |
| FR-003-34 | 장기보유특별공제율 | 보유기간별 공제율 (일반 연2%~30%, 1세대1주택 최대80%) |
| FR-003-35 | 보유기간 계산 | 취득일~양도일 (등기접수일/잔금청산일 중 빠른 날) |
| FR-003-36 | 1세대1주택 비과세 | 보유 2년+, 조정대상지역 거주 2년+, 12억원 이하 |
| FR-003-37 | 중과세율 적용 | 1년미만 70%, 1~2년 60%, 다주택 중과 |
| FR-003-38 | 기본공제 | 연 250만원 (자산유형별) |
| FR-003-39 | 누진세율 적용 | 8단계 누진세율(6%~45%) 정확 적용 |

---

### 4.5 [FR-004] 검증 규칙 관리 시스템

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-004-01 | 규칙 외부화 | 검증 규칙을 DB/JSON으로 관리, 코드 수정 없이 변경 가능 | P1 |
| FR-004-02 | 세율표 관리 | 귀속연도별 세율표를 데이터로 관리 | P1 |
| FR-004-03 | 공제한도 관리 | 공제/감면 한도를 귀속연도별로 관리 | P1 |
| FR-004-04 | 코드표 관리 | 업종코드, 서식코드, 신고유형코드 등 | P1 |
| FR-004-05 | 레코드 레이아웃 버전 관리 | 세목별/연도별 레코드 레이아웃 메타데이터 관리 | P1 |
| FR-004-06 | 규칙 유효기간 관리 | 세법 개정에 따른 규칙의 적용 시작일/종료일 | P1 |
| FR-004-07 | 규칙 이력 관리 | 변경 이력 추적 (변경 전/후 값, 변경 사유) | P2 |

#### 검증 규칙 데이터 모델 (예시)

```json
{
  "ruleId": "VAT-C001",
  "ruleName": "매출세액 계산 검증",
  "taxType": "VAT",
  "level": 3,
  "severity": "Error",
  "description": "매출세액 = 과세표준 x 10%",
  "formula": "FIELD('매출세액') == FIELD('과세표준') * 0.10",
  "legalBasis": "부가가치세법 제29조, 제30조",
  "penaltyRef": "과소신고가산세 10% (국세기본법 제47조의3)",
  "effectiveFrom": "2024-01-01",
  "effectiveTo": null,
  "errorMessage": "매출세액이 과세표준의 10%와 일치하지 않습니다. (파일값: {actual}, 계산값: {expected})"
}
```

---

### 4.6 [FR-005] 검증 결과 리포팅 엔진

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-005-01 | 요약 리포트 | 총 오류건수, 심각도별 분류, 검증 통과/실패 판정 | P1 |
| FR-005-02 | 상세 오류목록 | 오류코드, 오류유형, 위치(레코드/필드/바이트), 오류내용 | P1 |
| FR-005-03 | 수정 가이드 | 오류별 구체적 수정 방법 안내 | P1 |
| FR-005-04 | 법적 근거 연결 | 각 오류의 관련 법 조항, 가산세 위험 안내 | P2 |
| FR-005-05 | 심각도 분류 | Fatal(접수불가) / Error(과세위험) / Warning(확인필요) / Info(참고) | P1 |
| FR-005-06 | 거래처별 분리 리포트 | 합본 파일의 경우 거래처별로 분리된 결과 | P2 |
| FR-005-07 | 리포트 출력 형식 | 화면표시, PDF, Excel, JSON 출력 | P2 |
| FR-005-08 | 비교 리포트 | 수정 전/후 파일 비교 결과 | P3 |

---

### 4.7 [FR-006] 공통 유틸리티 기능

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-006-01 | 사업자번호 체크디지트 | 가중치 [1,3,7,1,3,7,1,3,5] 알고리즘 | P1 |
| FR-006-02 | 주민번호 체크디지트 | 가중치 [2,3,4,5,6,7,8,9,2,3,4,5] 알고리즘 | P1 |
| FR-006-03 | 법인번호 체크디지트 | 가중치 [1,2,1,2,1,2,1,2,1,2,1,2] 알고리즘 | P1 |
| FR-006-04 | 날짜 유효성 검증 | 윤년 판정, 월별 최대일수, 범위 검증 | P1 |
| FR-006-05 | 인코딩 변환 | EUC-KR ↔ UTF-8 변환, 바이트 계산 | P1 |
| FR-006-06 | 금액 단수처리 | 과세표준 1,000원 미만 절사, 세액 원 미만 절사 등 | P1 |
| FR-006-07 | 세율표 조회 | 귀속연도/과세표준별 적용 세율 조회 | P1 |
| FR-006-08 | 보유기간 계산 | 취득일~양도일 연/월/일 단위 계산 | P2 |
| FR-006-09 | 파일 뷰어 | 전자신고 파일 레코드/필드 단위 시각화 | P2 |

#### 사업자등록번호 체크디지트 알고리즘

```
입력: 10자리 숫자 (d[0]~d[9])
가중치: w = [1, 3, 7, 1, 3, 7, 1, 3, 5]

1. 합계 = Σ(d[i] * w[i]) for i = 0..8
2. 합계 += floor(d[8] * 5 / 10)
3. 체크디지트 = (10 - (합계 % 10)) % 10
4. d[9] == 체크디지트 → 유효
```

#### 주민등록번호 체크디지트 알고리즘

```
입력: 13자리 숫자 (d[0]~d[12])
가중치: w = [2, 3, 4, 5, 6, 7, 8, 9, 2, 3, 4, 5]

1. 합계 = Σ(d[i] * w[i]) for i = 0..11
2. 체크디지트 = (11 - (합계 % 11)) % 10
3. d[12] == 체크디지트 → 유효

추가검증:
- 월: 01~12, 일: 월별 최대일수 이내
- 성별코드(d[6]): 1,2(1900년대), 3,4(2000년대), 5~8(외국인)
```

#### 단수처리 규칙

| 항목 | 단수처리 | 법적근거 |
|------|---------|---------|
| 과세표준 (소득세/법인세) | 1,000원 미만 절사 | 국세기본법 |
| 산출세액/결정세액 | 원(1원) 미만 절사 | 국세기본법 |
| 부가가치세 과세표준 | 1,000원 미만 절사 | 국세기본법 |
| 지방소득세 | 10원 미만 절사 | 지방세법 |

---

### 4.8 [FR-007] 파일 뷰어 기능

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-007-01 | 레코드 목록 표시 | 파일 내 레코드를 목록으로 파싱하여 표시 | P2 |
| FR-007-02 | 필드 상세 표시 | 선택 레코드의 필드별 위치/값/타입 표시 | P2 |
| FR-007-03 | 원시 데이터 표시 | HEX/문자 병렬 표시 (바이트 수준 확인) | P3 |
| FR-007-04 | 오류 위치 하이라이트 | 검증 오류 필드를 시각적으로 강조 | P2 |
| FR-007-05 | 파일 비교 | 수정 전/후 파일의 차이점 비교 | P3 |

---

### 4.9 [FR-008] 일괄처리 기능

| 요구사항 ID | 항목 | 설명 | 우선순위 |
|------------|------|------|---------|
| FR-008-01 | 다중 파일 일괄 검증 | 복수 전자신고 파일 동시 검증 | P2 |
| FR-008-02 | 합본 파일 분리 검증 | 합본 파일 내 거래처별 분리 후 개별 검증 | P2 |
| FR-008-03 | 일괄 검증 결과 대시보드 | 전체 통과/실패 현황, 오류유형별 통계 | P2 |
| FR-008-04 | 오류 거래처 필터링 | 오류가 있는 거래처만 필터링하여 표시 | P2 |

---

## 제5장. 비기능 요구사항

### 5.1 성능 요구사항

| 항목 | 기준 |
|------|------|
| 단일 파일 검증 응답시간 | 10MB 이하 파일: 3초 이내 |
| 대용량 파일 처리 | 100MB 이상: 스트림 기반, 30초 이내 |
| 일괄 처리 | 100개 파일 동시: 5분 이내 |
| 메모리 사용 | 파일 크기 대비 2배 이내 (스트림 처리 시 고정 메모리) |

### 5.2 보안 요구사항

| 항목 | 기준 |
|------|------|
| 주민등록번호 마스킹 | 리포트 출력 시 뒤 6자리 마스킹 (800101-1\*\*\*\*\*\*) |
| 파일 보관 | 검증 완료 후 원본 파일 즉시 삭제 또는 암호화 보관 |
| 로그 보안 | 로그에 개인정보(주민번호, 계좌번호) 출력 금지 |
| 접근 제어 | 신청인 이외 검증 결과 접근 불가 |

### 5.3 확장성 요구사항

| 항목 | 기준 |
|------|------|
| 세목 추가 | 플러그인 구조로 신규 세목 검증 모듈 추가 용이 |
| 규칙 추가 | DB/JSON 기반으로 신규 검증 규칙 코드 변경 없이 추가 |
| 파일 포맷 변경 | 레코드 레이아웃 메타데이터 변경만으로 대응 |
| 세법 개정 대응 | 세율표, 공제한도 등 데이터 변경만으로 대응 |

### 5.4 운영 요구사항

| 항목 | 기준 |
|------|------|
| 감사 로그 | 검증 요청/결과 이력 보관 (최소 5년) |
| 배치 처리 | 대량 파일 정기 검증 스케줄링 지원 |
| 모니터링 | 검증 건수, 오류율, 처리시간 통계 대시보드 |

---

## 제6장. 데이터 모델 (핵심 테이블)

### 6.1 주요 테이블 구성

```
[기준정보]
├── MST_TAX_TYPE          -- 세목 마스터 (부가세, 법인세, 소득세 등)
├── MST_FORM_CODE         -- 서식코드 마스터
├── MST_RECORD_LAYOUT     -- 레코드 레이아웃 메타데이터
├── MST_FIELD_LAYOUT      -- 필드 레이아웃 메타데이터
├── MST_VALIDATION_RULE   -- 검증 규칙 마스터
├── MST_TAX_RATE          -- 세율표 (귀속연도별)
├── MST_DEDUCTION_LIMIT   -- 공제/감면 한도표
├── MST_CODE              -- 공통코드 (업종코드, 신고유형 등)
└── MST_ERROR_CODE        -- 오류코드 정의

[요청/처리]
├── REQ_VALIDATION        -- 검증 요청 (파일 업로드)
└── REQ_VALIDATION_FILE   -- 검증 대상 파일 정보

[결과]
├── RES_VALIDATION_RESULT -- 검증 결과 요약
├── RES_VALIDATION_DETAIL -- 검증 결과 상세 (오류 목록)
└── RES_VALIDATION_REPORT -- 검증 리포트

[이력/로그]
├── HIS_VALIDATION_LOG    -- 검증 처리 로그
└── HIS_RULE_CHANGE       -- 규칙 변경 이력
```

### 6.2 핵심 테이블 상세

#### MST_RECORD_LAYOUT (레코드 레이아웃 메타데이터)
```sql
CREATE TABLE MST_RECORD_LAYOUT (
    LAYOUT_ID       BIGINT AUTO_INCREMENT PRIMARY KEY  COMMENT '레이아웃ID',
    TAX_TYPE_CD     VARCHAR(10) NOT NULL               COMMENT '세목코드',
    FORM_CD         VARCHAR(10) NOT NULL               COMMENT '서식코드',
    RECORD_TYPE     CHAR(1) NOT NULL                   COMMENT '레코드구분(A~Z)',
    RECORD_NM       VARCHAR(100) NOT NULL              COMMENT '레코드명',
    RECORD_LEN      INT NOT NULL                       COMMENT '레코드길이(바이트)',
    REQUIRED_YN     CHAR(1) DEFAULT 'Y'                COMMENT '필수여부',
    APPLY_START_DT  DATE NOT NULL                      COMMENT '적용시작일',
    APPLY_END_DT    DATE                               COMMENT '적용종료일',
    reg_dt          DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    reg_id          VARCHAR(50) NOT NULL,
    chg_dt          DATETIME ON UPDATE CURRENT_TIMESTAMP,
    chg_id          VARCHAR(50)
) COMMENT '레코드 레이아웃 메타데이터';
```

#### MST_FIELD_LAYOUT (필드 레이아웃 메타데이터)
```sql
CREATE TABLE MST_FIELD_LAYOUT (
    FIELD_ID        BIGINT AUTO_INCREMENT PRIMARY KEY  COMMENT '필드ID',
    LAYOUT_ID       BIGINT NOT NULL                    COMMENT '레이아웃ID(FK)',
    FIELD_SEQ       INT NOT NULL                       COMMENT '필드순서',
    FIELD_NM        VARCHAR(100) NOT NULL              COMMENT '필드명',
    FIELD_START     INT NOT NULL                       COMMENT '시작위치(바이트)',
    FIELD_LEN       INT NOT NULL                       COMMENT '필드길이(바이트)',
    DATA_TYPE       CHAR(2) NOT NULL                   COMMENT '데이터타입(C:문자,N:숫자,CN:혼합)',
    REQUIRED_TYPE   CHAR(1) DEFAULT 'O'                COMMENT '필수유형(M:필수,C:조건부,O:선택)',
    VALID_VALUES    VARCHAR(500)                       COMMENT '허용값목록(JSON배열)',
    VALIDATION_TYPE VARCHAR(30)                        COMMENT '검증타입(BRN/RRN/DATE 등)',
    DESCRIPTION     VARCHAR(500)                       COMMENT '필드설명',
    reg_dt          DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    reg_id          VARCHAR(50) NOT NULL,
    chg_dt          DATETIME ON UPDATE CURRENT_TIMESTAMP,
    chg_id          VARCHAR(50)
) COMMENT '필드 레이아웃 메타데이터';
```

#### MST_VALIDATION_RULE (검증 규칙 마스터)
```sql
CREATE TABLE MST_VALIDATION_RULE (
    RULE_ID         VARCHAR(20) PRIMARY KEY            COMMENT '규칙ID(예:VAT-C001)',
    TAX_TYPE_CD     VARCHAR(10) NOT NULL               COMMENT '세목코드',
    RULE_NM         VARCHAR(200) NOT NULL              COMMENT '규칙명',
    RULE_LEVEL      TINYINT NOT NULL                   COMMENT '검증레벨(1~5)',
    SEVERITY        VARCHAR(10) NOT NULL               COMMENT '심각도(FATAL/ERROR/WARNING/INFO)',
    RULE_FORMULA    TEXT                               COMMENT '검증수식/조건(표현식)',
    LEGAL_BASIS     VARCHAR(200)                       COMMENT '법적근거(법조항)',
    PENALTY_REF     VARCHAR(200)                       COMMENT '가산세참조',
    ERROR_MSG       VARCHAR(500) NOT NULL              COMMENT '오류메시지(템플릿)',
    FIX_GUIDE       VARCHAR(500)                       COMMENT '수정가이드',
    APPLY_START_DT  DATE NOT NULL                      COMMENT '적용시작일',
    APPLY_END_DT    DATE                               COMMENT '적용종료일',
    USE_YN          CHAR(1) DEFAULT 'Y'                COMMENT '사용여부',
    reg_dt          DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    reg_id          VARCHAR(50) NOT NULL,
    chg_dt          DATETIME ON UPDATE CURRENT_TIMESTAMP,
    chg_id          VARCHAR(50)
) COMMENT '검증 규칙 마스터';
```

#### RES_VALIDATION_DETAIL (검증 결과 상세)
```sql
CREATE TABLE RES_VALIDATION_DETAIL (
    DETAIL_ID       BIGINT AUTO_INCREMENT PRIMARY KEY  COMMENT '상세ID',
    RESULT_ID       BIGINT NOT NULL                    COMMENT '결과ID(FK)',
    SEQ             INT NOT NULL                       COMMENT '순번',
    RULE_ID         VARCHAR(20) NOT NULL               COMMENT '규칙ID(FK)',
    SEVERITY        VARCHAR(10) NOT NULL               COMMENT '심각도',
    RECORD_TYPE     CHAR(1)                            COMMENT '오류레코드타입',
    RECORD_SEQ      INT                                COMMENT '오류레코드순번',
    FIELD_NM        VARCHAR(100)                       COMMENT '오류필드명',
    FIELD_POS       VARCHAR(20)                        COMMENT '오류위치(바이트)',
    ACTUAL_VALUE    VARCHAR(500)                       COMMENT '파일값',
    EXPECTED_VALUE  VARCHAR(500)                       COMMENT '기대값',
    ERROR_MSG       VARCHAR(500) NOT NULL              COMMENT '오류메시지',
    LEGAL_BASIS     VARCHAR(200)                       COMMENT '법적근거',
    FIX_GUIDE       VARCHAR(500)                       COMMENT '수정가이드',
    reg_dt          DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
    reg_id          VARCHAR(50) NOT NULL
) COMMENT '검증 결과 상세 (오류 목록)';
```

---

## 제7장. 검증 처리 흐름

```
[사용자]                    [FEV 시스템]                      [검증 엔진]
   │                           │                                │
   │  ① 파일 업로드            │                                │
   │ ─────────────────────────▶│                                │
   │                           │  ② 파일 메타데이터 추출         │
   │                           │  (확장자, 인코딩, 크기)          │
   │                           │                                │
   │                           │  ③ 세목 자동 식별               │
   │                           │  ④ 레코드 레이아웃 로드          │
   │                           │──────────────────────────────▶ │
   │                           │                                │  ⑤ L1: 형식검증
   │                           │                                │  ⑥ L2: 구조검증
   │                           │                                │  ⑦ L3: 내용검증
   │                           │                                │  ⑧ L4: 논리검증
   │                           │                                │  ⑨ L5: 법규검증
   │                           │  ⑩ 검증 결과 수신              │
   │                           │◀──────────────────────────────│
   │                           │                                │
   │                           │  ⑪ 리포트 생성                 │
   │  ⑫ 검증 결과 표시          │                                │
   │ ◀─────────────────────────│                                │
   │                           │                                │
   │  ⑬ 상세 오류 확인          │                                │
   │ ◀────────────────────────▶│                                │
   │  ⑭ 수정 가이드 확인        │                                │
   │ ◀────────────────────────▶│                                │
```

---

## 제8장. 우선순위 및 개발 로드맵

### Phase 1: 핵심 엔진 (MVP)
- [x] 파일 파서 엔진 (FR-001)
- [x] L1~L3 검증 (형식/구조/내용 검증)
- [x] 부가가치세 검증 모듈 (FR-003 부가세)
- [x] 기본 리포트 출력 (FR-005-01~02)
- [x] 공통 유틸리티 (FR-006-01~06)

### Phase 2: 세목 확장
- [ ] 법인세 검증 모듈 (FR-003 법인세 - 법인세-1/법인세-2 교차검증 포함)
- [ ] 종합소득세 검증 모듈 (FR-003 종합소득세 - 8단계 누진세율/인적공제/세액공제 포함)
- [ ] 원천세 검증 모듈 (FR-003 원천세 - A01~A99 소득종류별 합계/지급명세서 교차검증 포함)
- [ ] 양도소득세 검증 모듈 (FR-003-33~39)
- [ ] L4~L5 검증 (논리/법규 검증)

### Phase 3: 고도화
- [ ] 검증 규칙 관리 UI (FR-004)
- [ ] 수정 가이드 + 법적근거 연결 (FR-005-03~04)
- [ ] 파일 뷰어 (FR-007)
- [ ] 일괄처리 (FR-008)
- [ ] 크로스 세목 검증 (부가세 매출 ↔ 법인세 수입금액)

### Phase 4: 부가가치 기능
- [ ] AI 기반 오류 패턴 분석 및 예측
- [ ] 세법 개정 자동 감지 및 규칙 업데이트 알림
- [ ] 타 세무프로그램 연동 API 제공
- [ ] 홈택스 접수 전 사전검증 시뮬레이션

---

## 부록

### A. 참고 자료 출처

| 자료 | 경로/출처 |
|------|----------|
| 국세청 전자신고 프로그램 개발자 안내 | 홈택스 > 전자신고 안내 > 프로그램개발자안내 |
| 세목별 파일작성요령 | 국세청 홈택스 전자신고 안내 메뉴 |
| 국세법령정보시스템 | taxlaw.nts.go.kr |
| 법령정보센터 | law.go.kr |
| 프로젝트 내부 참조문서 | refer-doc/파일변환오류검증_핵심기능.md |
| 부가가치세 전자신고 파일설명서 | refer-doc/3. 전자신고_파일설명서(부가가치세).doc |
| 종합소득세 전자신고 파일설명서 | refer-doc/1. 전자신고_파일설명서(종합소득세).docx |
| 원천세 전자신고 파일설명서 | refer-doc/2. 전자신고_파일설명서(원천세).doc |
| 법인세-1 전자신고 파일설명서 | refer-doc/4. 전자신고_파일설명서(법인세-1).doc |
| 법인세-2 전자신고 파일설명서 | refer-doc/5. 전자신고_파일설명서(법인세-2).doc |
| 법인세-2 오류점검 파일설명서 | refer-doc/6. 전자신고_파일설명서(법인세-2 오류점검).doc |

### B. 추가 확인 필요 사항

1. 국세청 최신 레코드 레이아웃 명세서 (세목별, 2025~2026년 귀속) - `.doc` 파일의 정확한 바이트 단위 필드 위치/길이 확인 필요
2. 홈택스 차세대 시스템 전환에 따른 파일 포맷 변경 여부 (XML/JSON 전환 논의)
3. 전자세금계산서 의무발급 기준 추가 하향 일정
4. 2025~2026년 세법 개정 반영 사항 (세율, 공제한도 변경)
5. 국세청 전자신고 검증 API 공개 여부
6. `.doc` 바이너리 파일 → 텍스트/JSON 변환 작업 (정확한 레코드 레이아웃 추출)

### C. 용어 정의

| 용어 | 정의 |
|------|------|
| **FEV** | File for Electronic filing Validation (전자신고 파일 오류검증) |
| **전자신고 파일** | 세무프로그램에서 국세청 표준 포맷으로 생성한 신고 데이터 파일 |
| **레코드 레이아웃** | 국세청이 정한 파일 내 각 레코드의 필드별 위치/길이/타입 명세 |
| **체크디지트** | 사업자번호, 주민번호 등의 유효성을 검증하는 마지막 자리 검증 숫자 |
| **합본 파일** | 여러 거래처의 신고서를 하나의 파일로 합친 것 |
| **형식검증** | 파일 포맷, 필드 길이, 데이터 타입 등 물리적 구조 검증 |
| **내용검증** | 세액 계산, 합계 정합성 등 데이터 값의 정확성 검증 |
| **논리검증** | 서식 간 교차참조, 항목 간 논리적 일관성 검증 |
| **법규검증** | 세법 기준 세율/공제율/한도 적용의 적법성 검증 |
| **간이세액표** | 근로소득 원천징수 시 월급여/부양가족수별 세액 조회표 |
| **세무조정** | 회계상 당기순이익을 세법상 소득금액으로 전환하는 절차 |
| **이월결손금** | 과거 발생한 세무상 결손금을 당기 소득에서 공제하는 금액 |
| **최저한세** | 감면 적용 후에도 최소한 납부해야 하는 세액 기준 |

### D. 세목별 오류코드 체계 요약

| 접두어 | 세목 | 오류코드 범위 |
|--------|------|-------------|
| VAT-F/S/C/L/R | 부가가치세 | 형식/구조/내용/논리/법규 |
| CIT-F/S/C/L/T | 법인세-1 | 형식/구조/내용/논리/법규 |
| CIT2-F/E/W | 법인세-2 | 형식/내용논리/경고 |
| INC-C/L/T | 종합소득세 | 내용/논리/법규 |
| WHT-F/S/C/L/W | 원천세 | 형식/구조/내용/논리/경고 |

### E. 주요 코드표

#### E.1 귀속기간 코드 (부가가치세)

| 코드 | 의미 | 기간 |
|------|------|------|
| 01 | 1기 예정 | 1~3월 |
| 02 | 1기 확정 | 1~6월 |
| 03 | 2기 예정 | 7~9월 |
| 04 | 2기 확정 | 7~12월 |

#### E.2 신고구분 코드 (공통)

| 코드 | 의미 |
|------|------|
| 01 | 정기신고 |
| 02 | 수정신고 |
| 03 | 기한후신고 |
| 04 | 경정청구 |

#### E.3 대손사유 코드

| 코드 | 사유 |
|------|------|
| 01 | 부도발생(6개월 경과) |
| 02 | 강제집행/경매 |
| 03 | 채무자 회생/파산 |
| 04 | 소멸시효 완성 |
| 05 | 회수불능(법원 확인) |

#### E.4 법인구분 코드

| 코드 | 구분 |
|------|------|
| 01 | 내국영리법인 |
| 02 | 내국비영리법인 |
| 03 | 외국영리법인 |
| 04 | 외국비영리법인 |
| 05 | 조합법인 |
